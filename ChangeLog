2001-07-22  Edward Avis,  <epa98@voxel03>

	* README: Version 0.2.8 (again)

	* ClickListings.pm, getlistings_na: New file.

	* README: Version 0.2.8

	* scrapped_getlistings_uk_ananova:
	Renamed to scrapped_getlistings_uk_ananova since I started
	a new listings-grabber from scratch after the site changed
	its format.  (It does incorporate some of the code from
	the older version though).

	Made some attempts to adapt the older grabber to the new
	format before I decided to ditch it and start again;
	these are the changes being checked in.

	* XMLTV.pm, getlistings_uk_ananova, listings_to_latex:
	Uses UK_TZ.pm rather than uk_tz.pl.

	* UK_TZ.pm:
	Made into a proper module (the filename also changed to UK_TZ.pm).

	* listings_to_latex:
	Programme hashes have a key called sub_title, not 'sub-title'.

	* XMLTV.pm: Fixed so it works; Memoized to go (much) faster.

	* getlistings_uk_ananova: write_programme() moved to XMLTV.pm.

	* listings_to_latex:
	Moved get_programmes() into XMLTV.pm as read_programmes().

	* XMLTV.pm: New file.

	* getlistings_uk_ananova:
	Copied the clumpidx-adding code from the old listings-grabber.

	* getlistings_uk_ananova:
	Fix the output so nsgmls is happy (apart from it complaining about
	EMPTY elements in the DTD).

	* xmltv.dtd:
	Added 'new' element - first episode of a totally new programme.

	* getlistings_uk_ananova:
	Now uses the index page to work out what programme detail pages
	actually exist.

	* getlistings_uk_ananova:
	The internal channel name (eg bbc1.bbc.co.uk) is what gets output.

2001-07-17  Edward Avis,  <epa98@voxel03>

	* getlistings_uk_ananova:
	Lots of fixes, in particular the date and time handling now uses
	date_programmes() copied from the old listings grabber.  This has been
	modified many times over the past year to cope with the stupidities of
	timezone switching, so it should be pretty robust.

2001-07-16  Edward Avis,  <epa98@voxel03>

	* getlistings_uk_ananova: Handle some more data I've found.

	* getlistings_uk_ananova: New file.

2001-07-15  Edward Avis,  <epa98@voxel03>

	* scrapped_getlistings_uk_ananova:
	Better extraction of information from programme descriptions.

2001-06-21  Edward Avis,  <epa98@voxel03>

	* pick_cgi: Remove outdated towatch file if needed.

2001-06-10  Edward Avis,  <epa98@voxel03>

	* scrapped_getlistings_uk_ananova:
	Added special_split_title(), which handles programmes like 'News;
	Radio 3 Lunchtime Concert' and splits them.  Tidied up the handling of
	clumps when one of the programmes in them has been split by a special
	handler.

	* UK_TZ.pm:
	Removed FIXME - if a date has an explicit timezone, we just accept it
	as-is and don't need to worry.

	* scrapped_getlistings_uk_ananova:
	Attempt to fix chopping of '4Later' in '4Later: (BST) foo'.  Not
	tested.

	* pick_cgi:
	If the listings file is newer than tvprefs, don't worry about
	overwriting tvprefs.

	* pick_cgi:
	Use the programme's real title to look up in tvprefs - that's
	different to the displayed title, which may have the year
	or other stuff appended to it.

	* pick_cgi:
	Now pick_cgi can generate XML of the chosen programmes itself
	- removing the need for pick_process.

	* pick_cgi: Moved reading data into read_programmes().

	* xmltv.dtd:
	Added premiere and last-chance (to support listings from people like
	Sky, who show a film several times and flag the first and last
	showings), and rating (mostly for films).  Also
	<stereo>surround</stereo>.

2001-05-28  Edward Avis,  <epa98@voxel03>

	* mkdist: Remove cgi/ too.

	* mkdist: Fixed punctuation.

	* mkdist: Modified for XMLTV rather than Lingua::Preferred.

	* mkdist: New file.

	* README: Version 0.2.7; doc.html has gone.

	* pick_cgi:
	Print more information for each programme - sub-title, credits,
	category, date and clumpidx.

	* scrapped_getlistings_uk_ananova:
	Fixed istime() so it doesn't reckon '999' is a time.

2001-03-26  Edward Avis,  <epa98@voxel03>

	* listings_to_latex:
	Use ParseDate_PreservingTZ(), so dates are printed in the same timezone they have in the XML.  More intelligent printing of timezones.

	* UK_TZ.pm:
	Generalize gettz() to any timezone; new function ParseDate_PreservingTZ()

2001-03-22  Edward Avis,  <epa98@voxel03>

	* README: Version 0.2.5

	* scrapped_getlistings_uk_ananova: Today's date

	* pick_cgi: Moved some code into the Lingua::Preferred module

	* listings_to_latex: Use sans serif font

	* channeltest.pl, TVChannels.pm:
	Clean up a bit - still not working though

	* getlistings_nl: Disabled because the website has changed

2001-03-21  Edward Avis,  <epa98@voxel03>

	* UK_TZ.pm:
	parse_uk_date(): return undef if date is impossible (instead of dying)

	* scrapped_getlistings_uk_ananova: Bug fixes to GMT->BST changeover

2001-02-14  Edward Avis,  <epa98@voxel03>

	* channels_uk.xml, TVChannels.pm, README.channels, channeltest.pl, channels_nl.xml, channels.dtd:
	New file.

	* scrapped_getlistings_uk_ananova: Added usage message

2001-02-13  Edward Avis,  <epa98@voxel03>

	* pick_cgi:
	get_text() now copes with 'just strings' as well as hashrefs; moved
	most of the work into auxiliary sub get_text1().

	* scrapped_getlistings_uk_ananova: Add --nocache option

	* scrapped_getlistings_uk_ananova:
	Some dates now passed around as Date::Manip format rather than
	YYYYMMDD strings

	* scrapped_getlistings_uk_ananova:
	pages_for_channel() now returns hashrefs with 'url' and 'text', not
	just strings

2000-11-04  Edward Avis,  <epa98@voxel03>

	* getlistings_nl: Remove HTML entities and <a href> links

	* getlistings_nl: Re-add prototypes and extra HTML entity replacements

2000-10-27  Edward Avis,  <epa98@voxel03>

	* README: Whoops, 0.2.4

	* README: Updated for version 0.2.5

	* scrapped_getlistings_uk_ananova:
	Add more channels; quieter; handle empty descriptions better

	* UK_TZ.pm: Don't print warning of ambiguous dates

	* listings_to_latex: *** empty log message ***

	* listings_to_latex:
	Add short human-readable names for some UK digital channels

2000-10-26  Edward Avis,  <epa98@voxel03>

	* UK_TZ.pm:
	parse_uk_date(): you can now specify a 'default' timezone to be used for ambiguous times

	* sort_listings:
	programme_cmp() now has t() statements - surprisingly, it's not really any slower with trace turned off

	* scrapped_getlistings_uk_ananova: More summer time related fixes

	* UK_TZ.pm: It really works this time.  I promise.

	* getlistings_nl:
	Add some more HTML entities (really should do this properly)

	* getlistings_ca: Fix broken prototypes

	* scrapped_getlistings_uk_ananova:
	Work around Ananova's broken ordering / omission of days

	* scrapped_getlistings_uk_ananova:
	fix_clumps() to handle weirdnesses when special case handlers modify programmes which share a clump

2000-10-24  Edward Avis,  <epa98@voxel03>

	* README: Version 0.2.4

	* pick_cgi:
	XML::Simple 1.05 bugfix means text content no longer arrayified

2000-10-20  Edward Avis,  <epa98@voxel03>

	* scrapped_getlistings_uk_ananova:
	'clumpidx' processing for several programmes at same time moved into add_clumpidx()

2000-10-15  Edward Avis,  <epa98@voxel03>

	* pick_cgi, scrapped_getlistings_uk_ananova:
	The module Dbg has been reborn as Log::TraceMessages

	* pick_cgi:
	Add character set UTF-8 to HTTP headers and <meta http-equiv>

	* pick_cgi: Make reading $ENV{LANG} actually work

	* pick_cgi:
	Read XMLTV files with titles etc in multiple languages, and pick the language the user prefers

2000-10-12  Edward Avis,  <epa98@voxel03>

	* pick_cgi: Fix prototypes; remove references to /homes/epa98

	* UK_TZ.pm: Sanity checks

	* scrapped_getlistings_uk_ananova:
	special_4learning(): don't treat '1944' as a time

2000-10-10  Edward Avis,  <epa98@voxel03>

	* xmltv.dtd: Update version number to 0.3

	* filter_shown:
	Suppress 'no stop time' warning once for each channel - to handle sort_listings output without complaining

	* sort_listings, pick_cgi, listings_to_latex, scrapped_getlistings_uk_ananova, getlistings_nl, getlistings_ca:
	Declare subroutine prototypes to avoid perl 5.6 warning

2000-10-09  Edward Avis,  <epa98@voxel03>

	* getlistings_ca: Small tidy for xmltv-0.2

	* scrapped_getlistings_uk_ananova:
	Comment out / remove trace code for release

	* listings_to_latex:
	Quote title with quote() as well as converting it to Latin-1

	* getlistings_nl: Handle &auml; in HTML

	* README: Updated message for xmltv-0.2

	* getlistings_nl, getlistings_ca: New file.

	* listings_to_latex:
	Quote characters for LaTeX using quote() copied from dtd2latex

2000-10-06  Edward Avis,  <epa98@voxel03>

	* pick_cgi: Make backup of tvprefs before overwriting

	* uk_channels.xml: New file.

	* UK_TZ.pm: Comment changes

	* sort_listings: Better error message

	* scrapped_getlistings_uk_ananova: Improve 'presenter' desc-processing

2000-10-05  Edward Avis,  <epa98@voxel03>

	* listings_to_latex:
	Convert internal channel names to channel numbers (for UK anyway)

	* scrapped_getlistings_uk_ananova:
	Use DNS-style internal channel names, eg bbc1.bbc.co.uk

	* scrapped_getlistings_uk_ananova:
	get_cache() removed, replaced with Memoized, Memoize::Expired get()

2000-10-04  Edward Avis,  <epa98@voxel03>

	* sort_listings: Handle clumpidx

	* scrapped_getlistings_uk_ananova:
	Use clumpidx for several programmes sharing a timeslot

	* xmltv.dtd:
	Added clumpidx attribute of programme for 'News; Weather' type situations

	* xmltv.dtd:
	Add <guest> under <credits>; make clear that credits are in decreasing order of importance

	* xmltv.dtd:
	Add <subtitles> sub-element of programme with 'type' and 'language'

	* xmltv.dtd: Add <previously-shown> to indicate a repeat

	* scrapped_getlistings_uk_ananova:
	Write <programme> sub-elements in the correct, DTD-conforming order

	* xmltv.dtd: Make 'system' for episode-num actually work

	* xmltv.dtd:
	Add <video> and <audio> to cover audio-only, mute, b&w, stereo, and different aspect ratios.

	* xmltv.dtd:
	Add 'country' and episode numbering systems (xmltv_ns, onscreen)

	* scrapped_getlistings_uk_ananova:
	$prog->{credits}->{actor} and similar are now listrefs rather than scalars, as there can be more than one actor, commentator, etc for a programme.  New special_actor() to extract 'X stars' information from description.

	* pick_cgi: Replaced 'maybe' in tvprefs and %wanted with 'yes' or 'no'

	* scrapped_getlistings_uk_ananova:
	Skip over &nbsp; as well as actual spaces

	* scrapped_getlistings_uk_ananova:
	Renamed {date} to {start} as it should be, and introduced {date} correspoding to <date> in the XML output.  special_film() sets category=film and sniffs out dates from film descriptions.

	* scrapped_getlistings_uk_ananova:
	get_cache(): If non-gzipped cache file exists, use it and don't overwrite

2000-10-03  Edward Avis,  <epa98@voxel03>

	* scrapped_getlistings_uk_ananova:
	special_radio4() splits R4 into FM and LW

	* scrapped_getlistings_uk_ananova:
	Reorganized special cases - there is now a list @special_handlers of subroutines that are called in turn.  Programme hashrefs now have a {credits} item which itself is a hashref, with the same keys as given in the DTD; this replaces {director}.  Added special case handler special_presenter() to sniff 'presenter' from the description.

	* scrapped_getlistings_uk_ananova:
	Special case handling for '4learning' programmes

	* UK_TZ.pm: Sanity check

2000-10-02  Edward Avis,  <epa98@voxel03>

	* scrapped_getlistings_uk_ananova: Lazier

	* filter_shown: Warning if programme has no stop time (cannot filter)

	* scrapped_getlistings_uk_ananova: List of channels for Sky Digital

	* sort_listings: Warning for zero-length programmes

	* UK_TZ.pm: Sanity check

2000-09-23  Edward Avis,  <epa98@voxel03>

	* sort_listings: 'programmes do not sort' now non-fatal

	* scrapped_getlistings_uk_ananova:
	Separate two or more programmes sharing a time slot (eg News; Weather)

2000-09-09  Edward Avis,  <epa98@voxel03>

	* scrapped_getlistings_uk_ananova:
	No longer sorts output or adds end times - use sort_listings

	* sort_listings: Memoized some things, tidied

	* xmltv.dtd, UK_TZ.pm: New file.

	* listings_to_latex, scrapped_getlistings_uk_ananova:
	tz.pl renamed to uk_tz.pl

	* sort_listings, pick_process, pick_cgi, listings_to_latex, scrapped_getlistings_uk_ananova, filter_shown, README, ChangeLog.old, COPYING:
	New file.

